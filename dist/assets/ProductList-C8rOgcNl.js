import{r,j as e,L as N}from"./index-CAQkszjV.js";import{f as R,s as w,a as $}from"./texts-CQxB9mQH.js";import{P as C}from"./Product-BuA7dudG.js";import{u as B}from"./useDetectDataType-DknFIB0s.js";const o={"filter-heading":"_filter-heading_80pcj_1","filter-button-wrap":"_filter-button-wrap_80pcj_8","filter-button":"_filter-button_80pcj_8","product-list-skeleton":"_product-list-skeleton_80pcj_60","skeleton-product-card":"_skeleton-product-card_80pcj_74","skeleton-product-image":"_skeleton-product-image_80pcj_82"},b="https://pletenyikit.com",S=()=>{const{category:n,heading:a,products:c,setProducts:m}=B(),[t,p]=r.useState("none"),i=r.useRef([]),h=r.useRef(void 0),l=r.useRef("none");r.useEffect(()=>{h.current!==n?(h.current=n,i.current=[],p("none"),l.current="none"):l.current==="none"&&t!=="none"?(c.length>0&&(i.current=[...c]),l.current=t):l.current!=="none"&&t==="none"&&(l.current="none")},[n,c,t]);const d=r.useMemo(()=>t==="none"?i.current.length>0?i.current:c:[...i.current.length>0?i.current:c].sort((u,f)=>{const _=(u==null?void 0:u.price)??0,k=(f==null?void 0:f.price)??0;return t==="low"?_-k:k-_}),[t,c]),j=r.useRef("none");r.useEffect(()=>{j.current!==t&&(j.current=t,m(d))},[t,d,m]);const v=r.useCallback(()=>{p("high")},[]),P=r.useCallback(()=>{p("low")},[]),x=n?`${b}/${n}`:b,g=`Купити плетені ${(a==null?void 0:a.toLowerCase())??"товари"} — Плетений КіТ. Ручна робота, якісна пряжа.`,y=`${a??"Категорія"} | Плетений КіТ`;return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:y}),e.jsx("meta",{name:"description",content:g}),e.jsx("link",{rel:"canonical",href:x}),e.jsx("meta",{property:"og:url",content:x}),e.jsx("meta",{property:"og:title",content:y}),e.jsx("meta",{property:"og:description",content:g}),e.jsx("div",{className:"heading",children:e.jsx("h1",{"data-testid":"heading-title",children:a})}),e.jsx("div",{className:o["filter-heading"],children:R}),e.jsxs("div",{className:o["filter-button-wrap"],role:"group","aria-label":"Сортування",children:[e.jsx("button",{type:"button","data-testid":"sort-by-cheap",className:o["filter-button"],"aria-pressed":t==="low",onClick:P,children:w}),e.jsx("button",{type:"button","data-testid":"sort-by-expensive",className:o["filter-button"],"aria-pressed":t==="high",onClick:v,children:$})]}),e.jsx("div",{className:"product-category",children:d.length===0&&n?e.jsx("div",{className:o["product-list-skeleton"],children:Array.from({length:8}).map((s,u)=>e.jsx("div",{className:o["skeleton-product-card"],children:e.jsx("div",{className:o["skeleton-product-image"]})},u))}):d.filter(s=>s&&s.link&&s.id).map(s=>e.jsx(N,{to:`/${n}/${s.link}`,children:e.jsx(C,{product:s,type:"product"})},`${t}-${s.id}`))})]})};export{S as default};

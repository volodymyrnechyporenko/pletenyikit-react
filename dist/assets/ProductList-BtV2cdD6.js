import{r as s,j as e,L as v}from"./index-xDYO_iOy.js";import{f as y,s as P,a as N}from"./texts-CQxB9mQH.js";import{P as R}from"./Product-BknPPDk1.js";import{u as b}from"./useDetectDataType-BKNGSCeL.js";const n={"filter-heading":"_filter-heading_t6j76_1","filter-button-wrap":"_filter-button-wrap_t6j76_8","filter-button":"_filter-button_t6j76_8","product-list-skeleton":"_product-list-skeleton_t6j76_56","skeleton-product-card":"_skeleton-product-card_t6j76_70","skeleton-product-image":"_skeleton-product-image_t6j76_78"},L=()=>{const{category:i,heading:x,products:o,setProducts:p}=b(),[r,u]=s.useState("none"),c=s.useRef([]),h=s.useRef(void 0),l=s.useRef("none");s.useEffect(()=>{h.current!==i?(h.current=i,c.current=[],u("none"),l.current="none"):l.current==="none"&&r!=="none"?(o.length>0&&(c.current=[...o]),l.current=r):l.current!=="none"&&r==="none"&&(l.current="none")},[i,o,r]);const d=s.useMemo(()=>r==="none"?c.current.length>0?c.current:o:[...c.current.length>0?c.current:o].sort((a,f)=>{const g=(a==null?void 0:a.price)??0,j=(f==null?void 0:f.price)??0;return r==="low"?g-j:j-g}),[r,o]),m=s.useRef("none");s.useEffect(()=>{m.current!==r&&(m.current=r,p(d))},[r,d,p]);const _=s.useCallback(()=>{u(t=>t==="high"?"none":"high")},[]),k=s.useCallback(()=>{u(t=>t==="low"?"none":"low")},[]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"heading",children:e.jsx("h1",{"data-testid":"heading-title",children:x})}),e.jsx("div",{className:n["filter-heading"],children:y}),e.jsxs("div",{className:n["filter-button-wrap"],children:[e.jsx("div",{"data-testid":"sort-by-cheap",className:n["filter-button"],onClick:k,children:P}),e.jsx("div",{"data-testid":"sort-by-expensive",className:n["filter-button"],onClick:_,children:N})]}),e.jsx("div",{className:"product-category",children:d.length===0&&i?e.jsx("div",{className:n["product-list-skeleton"],children:Array.from({length:8}).map((t,a)=>e.jsx("div",{className:n["skeleton-product-card"],children:e.jsx("div",{className:n["skeleton-product-image"]})},a))}):d.filter(t=>t&&t.link&&t.id).map(t=>e.jsx(v,{to:`/${i}/${t.link}`,children:e.jsx(R,{product:t,type:"product"})},`${r}-${t.id}`))})]})};export{L as default};

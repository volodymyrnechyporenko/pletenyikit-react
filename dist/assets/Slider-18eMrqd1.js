import{j as l,r as h,u as _,F as m,f as p,a as x}from"./index-C6nRzxzJ.js";const d={"slider-container":"_slider-container_1iohr_1","slider-scrollable-block":"_slider-scrollable-block_1iohr_8","slider-card":"_slider-card_1iohr_17","slider-to-left-btn":"_slider-to-left-btn_1iohr_30","slider-to-right-btn":"_slider-to-right-btn_1iohr_34","slider-pagination-container":"_slider-pagination-container_1iohr_60","slider-pagination-btn":"_slider-pagination-btn_1iohr_71","slider-pagination-btn-active":"_slider-pagination-btn-active_1iohr_75"},j=({image:t})=>l.jsx("div",{className:d["slider-card"],children:l.jsx("img",{src:`/img/${t}`,alt:""})}),k=(t,n,e)=>{h.useEffect(()=>{const a=t.current;if(a&&!e){let r=null;const u=()=>{r!==null&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{var b;r=null;const o=((b=a.children[0])==null?void 0:b.offsetWidth)||0,f=a.scrollLeft,i=Math.round(f/o);n(i)})};return a.addEventListener("scroll",u),()=>{a.removeEventListener("scroll",u),r!==null&&cancelAnimationFrame(r)}}},[t,n,e])},C=()=>{const t=h.useRef(null),n=h.useCallback(e=>{if(t.current){const a=t.current.children;if(e>=0&&e<a.length){const r=a[e];if(r){const u=r.offsetWidth,o=e*u;t.current.scrollTo({left:o,behavior:"smooth"})}}}},[]);return{containerRef:t,handleCardClick:n}},S=({images:t})=>{const[n,e]=h.useState(0),[a,r]=h.useState(!1),{link:u}=_(),{containerRef:o,handleCardClick:f}=C(),i=t&&Array.isArray(t)?t:[];k(o,e,a);const b=c=>{const s=Math.max(0,n-1);e(s),f(s)},g=c=>{const s=Math.min(i.length-1,n+1);e(s),f(s)};return h.useEffect(()=>{e(0),r(!0),o.current&&(o.current.scrollLeft=0);const c=setTimeout(()=>{r(!1)},100);return()=>clearTimeout(c)},[o,u,i.length]),h.useEffect(()=>{i.length>0&&n>=i.length&&e(0)},[i.length,n]),l.jsxs("div",{"data-testid":"slider-container",className:d["slider-container"],role:"region","aria-label":"Зображення товару",children:[n>0&&l.jsx("button",{type:"button",className:d["slider-to-left-btn"],"aria-label":"Попереднє зображення",onClick:()=>b(),children:l.jsx(m,{"data-testid":"font-awesome-icon",icon:p,size:"2x"})}),n<i.length-1&&l.jsx("button",{type:"button",className:d["slider-to-right-btn"],"aria-label":"Наступне зображення",onClick:()=>g(),children:l.jsx(m,{"data-testid":"font-awesome-icon",icon:x,size:"2x"})}),i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:d["slider-pagination-container"],role:"tablist","aria-label":"Номер зображення",children:i.map((c,s)=>l.jsx("button",{type:"button",role:"tab","aria-label":`Зображення ${s+1} з ${i.length}`,"aria-selected":n===s,className:d[`slider-pagination-btn${n===s?"-active":""}`],onClick:()=>{e(s),f(s)},children:"•"},`scroll-to-${c}`))}),l.jsx("div",{className:d["slider-scrollable-block"],ref:o,children:i.map(c=>l.jsx(j,{image:c},c))})]})]})};export{S};

import{r as n,j as e,L as w}from"./index-DD1NFevO.js";import{f as N,s as R,a as $}from"./texts-CQxB9mQH.js";import{P as C}from"./Product-CuUxVLAg.js";import{u as B}from"./useDetectDataType-CzrxfISu.js";const o={"filter-heading":"_filter-heading_80pcj_1","filter-button-wrap":"_filter-button-wrap_80pcj_8","filter-button":"_filter-button_80pcj_8","product-list-skeleton":"_product-list-skeleton_80pcj_60","skeleton-product-card":"_skeleton-product-card_80pcj_74","skeleton-product-image":"_skeleton-product-image_80pcj_82"},b="https://pletenyikit.com",S=()=>{const{category:s,heading:a,products:c,setProducts:h}=B(),[t,p]=n.useState("none"),i=n.useRef([]),m=n.useRef(void 0),l=n.useRef("none");n.useEffect(()=>{m.current!==s?(m.current=s,i.current=[],p("none"),l.current="none"):l.current==="none"&&t!=="none"?(c.length>0&&(i.current=[...c]),l.current=t):l.current!=="none"&&t==="none"&&(l.current="none")},[s,c,t]);const d=n.useMemo(()=>t==="none"?i.current.length>0?i.current:c:[...i.current.length>0?i.current:c].sort((u,f)=>{const _=(u==null?void 0:u.price)??0,k=(f==null?void 0:f.price)??0;return t==="low"?_-k:k-_}),[t,c]),j=n.useRef("none");n.useEffect(()=>{j.current!==t&&(j.current=t,h(d))},[t,d,h]);const v=n.useCallback(()=>{p(r=>r==="high"?"none":"high")},[]),P=n.useCallback(()=>{p(r=>r==="low"?"none":"low")},[]),x=s?`${b}/${s}`:b,g=`Купити плетені ${(a==null?void 0:a.toLowerCase())??"товари"} — Плетений КіТ. Ручна робота, якісна пряжа.`,y=`${a??"Категорія"} | Плетений КіТ`;return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:y}),e.jsx("meta",{name:"description",content:g}),e.jsx("link",{rel:"canonical",href:x}),e.jsx("meta",{property:"og:url",content:x}),e.jsx("meta",{property:"og:title",content:y}),e.jsx("meta",{property:"og:description",content:g}),e.jsx("div",{className:"heading",children:e.jsx("h1",{"data-testid":"heading-title",children:a})}),e.jsx("div",{className:o["filter-heading"],children:N}),e.jsxs("div",{className:o["filter-button-wrap"],role:"group","aria-label":"Сортування",children:[e.jsx("button",{type:"button","data-testid":"sort-by-cheap",className:o["filter-button"],"aria-pressed":t==="low",onClick:P,children:R}),e.jsx("button",{type:"button","data-testid":"sort-by-expensive",className:o["filter-button"],"aria-pressed":t==="high",onClick:v,children:$})]}),e.jsx("div",{className:"product-category",children:d.length===0&&s?e.jsx("div",{className:o["product-list-skeleton"],children:Array.from({length:8}).map((r,u)=>e.jsx("div",{className:o["skeleton-product-card"],children:e.jsx("div",{className:o["skeleton-product-image"]})},u))}):d.filter(r=>r&&r.link&&r.id).map(r=>e.jsx(w,{to:`/${s}/${r.link}`,children:e.jsx(C,{product:r,type:"product"})},`${t}-${r.id}`))})]})};export{S as default};

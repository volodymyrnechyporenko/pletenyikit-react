import{j as l,r as u,u as _,F as m,f as v,a as p}from"./index-DD1NFevO.js";const d={"slider-container":"_slider-container_1rbv7_1","slider-scrollable-block":"_slider-scrollable-block_1rbv7_9","slider-card":"_slider-card_1rbv7_18","slider-to-left-btn":"_slider-to-left-btn_1rbv7_32","slider-to-right-btn":"_slider-to-right-btn_1rbv7_36","slider-pagination-container":"_slider-pagination-container_1rbv7_62","slider-pagination-btn":"_slider-pagination-btn_1rbv7_73","slider-pagination-btn-active":"_slider-pagination-btn-active_1rbv7_77"},x=({image:t})=>l.jsx("div",{className:d["slider-card"],children:l.jsx("img",{src:`/img/${t}`,alt:""})}),j=(t,n,e)=>{u.useEffect(()=>{const i=t.current;if(i&&!e){let r=null;const b=()=>{r!==null&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{var h;r=null;const c=((h=i.children[0])==null?void 0:h.offsetWidth)||0,f=i.scrollLeft,s=Math.round(f/c);n(s)})};return i.addEventListener("scroll",b),()=>{i.removeEventListener("scroll",b),r!==null&&cancelAnimationFrame(r)}}},[t,n,e])},k=()=>{const t=u.useRef(null),n=u.useCallback(e=>{if(t.current){const i=t.current.children;if(e>=0&&e<i.length){const r=i[e];if(r){const b=r.offsetWidth,c=e*b;t.current.scrollTo({left:c,behavior:"smooth"})}}}},[]);return{containerRef:t,handleCardClick:n}},S=({images:t})=>{const[n,e]=u.useState(0),[i,r]=u.useState(!1),{link:b}=_(),{containerRef:c,handleCardClick:f}=k(),s=t&&Array.isArray(t)?t:[];j(c,e,i);const h=o=>{const a=Math.max(0,n-1);e(a),f(a)},g=o=>{const a=Math.min(s.length-1,n+1);e(a),f(a)};return u.useEffect(()=>{e(0),r(!0),c.current&&(c.current.scrollLeft=0);const o=setTimeout(()=>{r(!1)},100);return()=>clearTimeout(o)},[c,b,s.length]),u.useEffect(()=>{s.length>0&&n>=s.length&&e(0)},[s.length,n]),l.jsxs("div",{"data-testid":"slider-container",className:d["slider-container"],role:"region","aria-label":"Зображення товару",children:[n>0&&l.jsx("button",{type:"button",className:d["slider-to-left-btn"],"aria-label":"Попереднє зображення",onClick:()=>h(),children:l.jsx(m,{"data-testid":"font-awesome-icon",icon:v,size:"2x"})}),n<s.length-1&&l.jsx("button",{type:"button",className:d["slider-to-right-btn"],"aria-label":"Наступне зображення",onClick:()=>g(),children:l.jsx(m,{"data-testid":"font-awesome-icon",icon:p,size:"2x"})}),s.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:d["slider-pagination-container"],role:"tablist","aria-label":"Номер зображення",children:s.map((o,a)=>l.jsx("button",{type:"button",role:"tab","aria-label":`Зображення ${a+1} з ${s.length}`,"aria-selected":n===a,className:d[`slider-pagination-btn${n===a?"-active":""}`],onClick:()=>{e(a),f(a)},children:"•"},`scroll-to-${o}`))}),l.jsx("div",{className:d["slider-scrollable-block"],ref:c,children:s.map(o=>l.jsx(x,{image:o},o))})]})]})};export{S};

import{r as s,j as e,H as P,L as w}from"./index-BKTwj-B5.js";import{f as N,s as R,a as $}from"./texts-CQxB9mQH.js";import{P as C}from"./Product-Tz46fOgl.js";import{u as B}from"./useDetectDataType-lnKTaADj.js";const o={"filter-heading":"_filter-heading_80pcj_1","filter-button-wrap":"_filter-button-wrap_80pcj_8","filter-button":"_filter-button_80pcj_8","product-list-skeleton":"_product-list-skeleton_80pcj_60","skeleton-product-card":"_skeleton-product-card_80pcj_74","skeleton-product-image":"_skeleton-product-image_80pcj_82"},k="https://pletenyikit.com",T=()=>{const{category:n,heading:c,products:i,setProducts:h}=B(),[t,p]=s.useState("none"),l=s.useRef([]),m=s.useRef(void 0),a=s.useRef("none");s.useEffect(()=>{m.current!==n?(m.current=n,l.current=[],p("none"),a.current="none"):a.current==="none"&&t!=="none"?(i.length>0&&(l.current=[...i]),a.current=t):a.current!=="none"&&t==="none"&&(a.current="none")},[n,i,t]);const d=s.useMemo(()=>t==="none"?l.current.length>0?l.current:i:[...l.current.length>0?l.current:i].sort((u,f)=>{const y=(u==null?void 0:u.price)??0,_=(f==null?void 0:f.price)??0;return t==="low"?y-_:_-y}),[t,i]),j=s.useRef("none");s.useEffect(()=>{j.current!==t&&(j.current=t,h(d))},[t,d,h]);const b=s.useCallback(()=>{p(r=>r==="high"?"none":"high")},[]),v=s.useCallback(()=>{p(r=>r==="low"?"none":"low")},[]),x=n?`${k}/${n}`:k,g=`Купити плетені ${(c==null?void 0:c.toLowerCase())??"товари"} — Плетений КіТ. Ручна робота, якісна пряжа.`;return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx("title",{children:c??"Категорія"}),e.jsx("meta",{name:"description",content:g}),e.jsx("link",{rel:"canonical",href:x}),e.jsx("meta",{property:"og:url",content:x}),e.jsx("meta",{property:"og:title",content:`${c??"Категорія"} | Плетений КіТ`}),e.jsx("meta",{property:"og:description",content:g})]}),e.jsx("div",{className:"heading",children:e.jsx("h1",{"data-testid":"heading-title",children:c})}),e.jsx("div",{className:o["filter-heading"],children:N}),e.jsxs("div",{className:o["filter-button-wrap"],role:"group","aria-label":"Сортування",children:[e.jsx("button",{type:"button","data-testid":"sort-by-cheap",className:o["filter-button"],"aria-pressed":t==="low",onClick:v,children:R}),e.jsx("button",{type:"button","data-testid":"sort-by-expensive",className:o["filter-button"],"aria-pressed":t==="high",onClick:b,children:$})]}),e.jsx("div",{className:"product-category",children:d.length===0&&n?e.jsx("div",{className:o["product-list-skeleton"],children:Array.from({length:8}).map((r,u)=>e.jsx("div",{className:o["skeleton-product-card"],children:e.jsx("div",{className:o["skeleton-product-image"]})},u))}):d.filter(r=>r&&r.link&&r.id).map(r=>e.jsx(w,{to:`/${n}/${r.link}`,children:e.jsx(C,{product:r,type:"product"})},`${t}-${r.id}`))})]})};export{T as default};

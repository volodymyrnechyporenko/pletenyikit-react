import{r as s,j as e,L as y}from"./index-C6nRzxzJ.js";import{f as v,s as b,a as P}from"./texts-CQxB9mQH.js";import{P as N}from"./Product-CEgG_fJm.js";import{u as R}from"./useDetectDataType-DcBIdt9Z.js";const n={"filter-heading":"_filter-heading_80pcj_1","filter-button-wrap":"_filter-button-wrap_80pcj_8","filter-button":"_filter-button_80pcj_8","product-list-skeleton":"_product-list-skeleton_80pcj_60","skeleton-product-card":"_skeleton-product-card_80pcj_74","skeleton-product-image":"_skeleton-product-image_80pcj_82"},L=()=>{const{category:i,heading:x,products:o,setProducts:f}=R(),[t,d]=s.useState("none"),c=s.useRef([]),h=s.useRef(void 0),a=s.useRef("none");s.useEffect(()=>{h.current!==i?(h.current=i,c.current=[],d("none"),a.current="none"):a.current==="none"&&t!=="none"?(o.length>0&&(c.current=[...o]),a.current=t):a.current!=="none"&&t==="none"&&(a.current="none")},[i,o,t]);const u=s.useMemo(()=>t==="none"?c.current.length>0?c.current:o:[...c.current.length>0?c.current:o].sort((l,p)=>{const g=(l==null?void 0:l.price)??0,j=(p==null?void 0:p.price)??0;return t==="low"?g-j:j-g}),[t,o]),m=s.useRef("none");s.useEffect(()=>{m.current!==t&&(m.current=t,f(u))},[t,u,f]);const _=s.useCallback(()=>{d(r=>r==="high"?"none":"high")},[]),k=s.useCallback(()=>{d(r=>r==="low"?"none":"low")},[]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"heading",children:e.jsx("h1",{"data-testid":"heading-title",children:x})}),e.jsx("div",{className:n["filter-heading"],children:v}),e.jsxs("div",{className:n["filter-button-wrap"],role:"group","aria-label":"Сортування",children:[e.jsx("button",{type:"button","data-testid":"sort-by-cheap",className:n["filter-button"],"aria-pressed":t==="low",onClick:k,children:b}),e.jsx("button",{type:"button","data-testid":"sort-by-expensive",className:n["filter-button"],"aria-pressed":t==="high",onClick:_,children:P})]}),e.jsx("div",{className:"product-category",children:u.length===0&&i?e.jsx("div",{className:n["product-list-skeleton"],children:Array.from({length:8}).map((r,l)=>e.jsx("div",{className:n["skeleton-product-card"],children:e.jsx("div",{className:n["skeleton-product-image"]})},l))}):u.filter(r=>r&&r.link&&r.id).map(r=>e.jsx(y,{to:`/${i}/${r.link}`,children:e.jsx(N,{product:r,type:"product"})},`${t}-${r.id}`))})]})};export{L as default};

import{j as r,r as h,u as _,F as b,f as p,a as x}from"./index-B8B9_S2E.js";const d={"slider-container":"_slider-container_1iohr_1","slider-scrollable-block":"_slider-scrollable-block_1iohr_8","slider-card":"_slider-card_1iohr_17","slider-to-left-btn":"_slider-to-left-btn_1iohr_30","slider-to-right-btn":"_slider-to-right-btn_1iohr_34","slider-pagination-container":"_slider-pagination-container_1iohr_60","slider-pagination-btn":"_slider-pagination-btn_1iohr_71","slider-pagination-btn-active":"_slider-pagination-btn-active_1iohr_75"},j=({image:e})=>r.jsx("div",{className:d["slider-card"],children:r.jsx("img",{src:`/img/${e}`,alt:""})}),k=(e,n,t)=>{h.useEffect(()=>{const i=e.current;if(i&&!t){const o=()=>{var f;if(!t){const a=((f=i.children[0])==null?void 0:f.offsetWidth)||0,u=i.scrollLeft,l=Math.round(u/a);n(l)}};return i.addEventListener("scroll",o),()=>{i.removeEventListener("scroll",o)}}},[e,n,t])},v=()=>{const e=h.useRef(null),n=h.useCallback(t=>{if(e.current){const i=e.current.children;if(t>=0&&t<i.length){const o=i[t];if(o){const f=o.offsetWidth,a=t*f;e.current.scrollTo({left:a,behavior:"smooth"})}}}},[]);return{containerRef:e,handleCardClick:n}},S=({images:e})=>{const[n,t]=h.useState(0),[i,o]=h.useState(!1),{link:f}=_(),{containerRef:a,handleCardClick:u}=v(),l=e&&Array.isArray(e)?e:[];k(a,t,i);const g=c=>{const s=Math.max(0,n-1);t(s),u(s)},m=c=>{const s=Math.min(l.length-1,n+1);t(s),u(s)};return h.useEffect(()=>{t(0),o(!0),a.current&&(a.current.scrollLeft=0);const c=setTimeout(()=>{o(!1)},100);return()=>clearTimeout(c)},[a,f,l.length]),h.useEffect(()=>{l.length>0&&n>=l.length&&t(0)},[l.length,n]),r.jsxs("div",{"data-testid":"slider-container",className:d["slider-container"],role:"region","aria-label":"Зображення товару",children:[n>0&&r.jsx("button",{type:"button",className:d["slider-to-left-btn"],"aria-label":"Попереднє зображення",onClick:()=>g(),children:r.jsx(b,{"data-testid":"font-awesome-icon",icon:p,size:"2x"})}),n<l.length-1&&r.jsx("button",{type:"button",className:d["slider-to-right-btn"],"aria-label":"Наступне зображення",onClick:()=>m(),children:r.jsx(b,{"data-testid":"font-awesome-icon",icon:x,size:"2x"})}),l.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:d["slider-pagination-container"],role:"tablist","aria-label":"Номер зображення",children:l.map((c,s)=>r.jsx("button",{type:"button",role:"tab","aria-label":`Зображення ${s+1} з ${l.length}`,"aria-selected":n===s,className:d[`slider-pagination-btn${n===s?"-active":""}`],onClick:()=>{t(s),u(s)},children:"•"},`scroll-to-${c}`))}),r.jsx("div",{className:d["slider-scrollable-block"],ref:a,children:l.map(c=>r.jsx(j,{image:c},c))})]})]})};export{S};
